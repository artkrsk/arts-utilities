#!/bin/sh
# Get staged PHP files
STAGED_PHP_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep '\.php$' || true)

if [ -n "$STAGED_PHP_FILES" ]; then
  echo "Running phpcs on staged PHP files..."
  composer phpcs -- $STAGED_PHP_FILES || {
    echo "❌ phpcs failed. Please fix the errors and try again."
    exit 1
  }
  echo "✅ phpcs passed!"
fi

# Run JS/TS linting
echo "Running ESLint..."
npm run lint || {
  echo "❌ ESLint failed. Please fix the errors and try again."
  exit 1
}
echo "✅ ESLint passed!"
